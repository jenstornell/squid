!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.autosize=n.exports}}(this,function(e,t){"use strict";var n,o,r="function"==typeof Map?new Map:(n=[],o=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return o[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),o.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o.splice(t,1))}}),l=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){l=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,n=null,o=null,i=null,d=function(){e.clientWidth!==o&&a()},s=function(t){window.removeEventListener("resize",d,!1),e.removeEventListener("input",a,!1),e.removeEventListener("keyup",a,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",a,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",a,!1),window.addEventListener("resize",d,!1),e.addEventListener("input",a,!1),e.addEventListener("autosize:update",a,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:s,update:a}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),a()}function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",o=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function a(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(o<t?"hidden"===n.overflowY&&(c("scroll"),u(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),u(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),i!==o){i=o;var r=l("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function d(e){var t=r.get(e);t&&t.destroy()}function s(e){var t=r.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return i(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],d),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=c,e.exports=t.default});class MySqlQueryTester{constructor(e){this.o=Object.assign({},this.defaults(),e),document.addEventListener("DOMContentLoaded",()=>{this.onClickRun()})}defaults(){return{root:"http://localhost/misc/mysql-query-tester/"}}onClickRun(){document.querySelector("button").addEventListener("click",e=>{this.handlerClickRun()})}onDoubleClickCell(){document.querySelectorAll("td").forEach(e=>{e.addEventListener("dblclick",e=>{let t=this.index(e.target.closest("td")),n=document.querySelector(`th:nth-child(${t})`),o="";void 0===n.dataset.open?n.dataset.open="":delete n.dataset.open,document.querySelectorAll("th[data-open]").forEach(e=>{let t=this.index(e);o+=`td:nth-child(${t}),\n`}),""==o?document.querySelector("#custom-css").innerHTML="":(o=o.substring(0,o.length-2)+"{\n            max-width: none !important;\n          }",document.querySelector("#custom-css").innerHTML=o);let r=document.querySelector("#table").scrollWidth;document.querySelector("#scrollbar").style.width=`${r}px`,(new Scrollmirror).init()})})}index(e){return Array.from(e.parentNode.children).indexOf(e)+1}handlerClickRun(){this.ajax("query"),this.ajax("table")}ajax(){let e=document.querySelector("textarea").value;fetch(this.o.root+"/core/ajax-table.php",{method:"POST",body:e,headers:{"Content-Type":"Content-Type: application/json"}}).then(e=>e.text()).then(e=>{document.querySelector("#results").innerHTML=e;let t=document.querySelector("#table");if(!t)return;let n=t.scrollWidth;document.querySelector("#scrollbar").style.width=`${n}px`,(new Scrollmirror).init(),this.onDoubleClickCell()})}}class Scrollmirror{constructor(){}init(){this.onScroll()}onScroll(){document.querySelector("#scrollbar").parentNode.addEventListener("scroll",e=>{let t=e.target.scrollLeft,n=document.querySelector("#table");n&&(n.scrollLeft=t)})}runOnScroll(){}}