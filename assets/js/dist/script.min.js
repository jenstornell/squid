!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var o={exports:{}};t(o,o.exports),e.autosize=o.exports}}(this,function(e,t){"use strict";var o,n,r="function"==typeof Map?new Map:(o=[],n=[],{has:function(e){return o.indexOf(e)>-1},get:function(e){return n[o.indexOf(e)]},set:function(e,t){-1===o.indexOf(e)&&(o.push(e),n.push(t))},delete:function(e){var t=o.indexOf(e);t>-1&&(o.splice(t,1),n.splice(t,1))}}),l=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){l=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function d(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,o=null,n=null,d=null,c=function(){e.clientWidth!==n&&u()},i=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",u,!1),e.removeEventListener("keyup",u,!1),e.removeEventListener("autosize:destroy",i,!1),e.removeEventListener("autosize:update",u,!1),Object.keys(t).forEach(function(o){e.style[o]=t[o]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",i,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",u,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",u,!1),e.addEventListener("autosize:update",u,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:i,update:u}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),o="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(o)&&(o=0),u()}function a(t){var o=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=o,e.style.overflowY=t}function s(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+o+"px",n=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function u(){s();var t=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),n="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(n<t?"hidden"===o.overflowY&&(a("scroll"),s(),n="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(a("hidden"),s(),n="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),d!==n){d=n;var r=l("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function c(e){var t=r.get(e);t&&t.destroy()}function i(e){var t=r.get(e);t&&t.update()}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((a=function(e){return e}).destroy=function(e){return e},a.update=function(e){return e}):((a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return d(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],c),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.default=a,e.exports=t.default}),function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,o,n={},r="querySelector"in document&&"addEventListener"in e&&"classList"in document.createElement("_"),l="closed",d={selectorToggle:"[data-modal]",selectorWindow:"[data-modal-window]",selectorClose:"[data-modal-close]",modalActiveClass:"active",modalBGClass:"modal-bg",preventBGScroll:!0,preventBGScrollHtml:!0,preventBGScrollBody:!0,backspaceClose:!0,stopVideo:!0,callbackOpen:function(){},callbackClose:function(){}},c=function(){var e={},t=!1,o=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);for(var r=function(o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t&&"[object Object]"===Object.prototype.toString.call(o[n])?e[n]=c(!0,e[n],o[n]):e[n]=o[n])};o<n;o++){r(arguments[o])}return e},i=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null};n.closeModal=function(e){var n,r=c(o||d,e||{}),i=document.querySelector(r.selectorWindow+"."+r.modalActiveClass);i&&(!function(e,t){if(t.stopVideo&&e.classList.contains(t.modalActiveClass)){var o=e.querySelector("iframe"),n=e.querySelector("video");if(o){var r=o.src;o.src=r}n&&n.pause()}}(i,r),i.classList.remove(r.modalActiveClass),(n=document.querySelector("[data-modal-bg]"))&&document.body.removeChild(n),l="closed",r.preventBGScroll&&(document.documentElement.style.overflowY="",document.body.style.overflowY="",document.body.style.paddingRight=""),r.callbackClose(t,i),t&&(t.focus(),t=null))},n.openModal=function(e,r,i){var a=c(o||d,i||{}),s=document.querySelector(r);"open"===l&&n.closeModal(a),e&&(t=e),s.classList.add(a.modalActiveClass),function(){if(!document.querySelector("[data-modal-bg]")){var e=document.createElement("div");e.setAttribute("data-modal-bg",!0),e.classList.add(o.modalBGClass),document.body.appendChild(e)}}(),l="open",s.setAttribute("tabindex","-1"),s.focus(),a.preventBGScroll&&(a.preventBGScrollHtml&&(document.documentElement.style.overflowY="hidden"),a.preventBGScrollBody&&(document.body.style.overflowY="hidden")),a.callbackOpen(e,s)};var a=function(e,t,o){if(o)return e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchend",a,!1),void e.removeEventListener("click",s,!1);if(t&&"function"==typeof t){var n,r,l,d,c,i=function(e){n=!0,r=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY},a=function(e){d=e.changedTouches[0].pageX-r,c=e.changedTouches[0].pageY-l,Math.abs(d)>=7||Math.abs(c)>=10||t(e)},s=function(e){n?n=!1:t(e)};e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",a,!1),e.addEventListener("click",s,!1)}},s=function(e){var t=e.target,r=i(t,o.selectorToggle),d=i(t,o.selectorClose),c=i(t,o.selectorWindow),a=e.keyCode;if(a&&"open"===l)(27===a||o.backspaceClose&&(8===a||46===a))&&n.closeModal();else if(t){if(c&&!d)return;!r||a&&13!==a?"open"===l&&(e.preventDefault(),n.closeModal()):(e.preventDefault(),n.openModal(r,r.getAttribute("data-modal"),o))}};return n.destroy=function(){o&&(a(document,null,!0),document.removeEventListener("keydown",s,!1),document.documentElement.style.overflowY="",document.body.style.overflowY="",document.body.style.paddingRight="",null,t=null,o=null)},n.init=function(e){r&&(n.destroy(),o=c(d,e||{}),function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var n=o.offsetWidth;return e.parentNode.removeChild(e),t-n}(),a(document,s),document.addEventListener("keydown",s,!1))},n});class MySqlQueryTester{constructor(e){this.o=Object.assign({},this.defaults(),e),document.addEventListener("DOMContentLoaded",()=>{this.onClickRun()})}defaults(){return{root:"http://localhost/misc/mysql-query-tester/"}}onClickRun(){document.querySelector(".button").addEventListener("click",e=>{this.handlerClickRun()})}onDoubleClickCell(){document.querySelectorAll(".td").forEach(e=>{e.addEventListener("dblclick",e=>{if(!e.altKey)return;let t=e.target.innerHTML;document.querySelector("#modal textarea").innerHTML=t,modals.openModal(null,"#modal",{preventBGScroll:!0,preventBGScrollHtml:!0,preventBGScrollBody:!0}),autosize.update(document.querySelector("#modal textarea")),console.log("open")})})}index(e){return Array.from(e.parentNode.children).indexOf(e)+1}handlerClickRun(){this.ajax("query"),this.ajax("table")}ajax(){let e=document.querySelector("textarea").value;document.querySelector(".button").dataset.loading="",fetch(this.o.root+"/core/ajax-table.php",{method:"POST",body:e,headers:{"Content-Type":"Content-Type: application/json"}}).then(e=>e.text()).then(e=>{document.querySelector("#results").innerHTML=e;let t=document.querySelector("#table");if(!t)return;let o=t.scrollWidth;document.querySelector("#scrollbar").style.width=`${o}px`,(new Scrollmirror).init(),this.onDoubleClickCell(),delete document.querySelector(".button").dataset.loading})}}class Scrollmirror{constructor(){}init(){this.onScroll()}onScroll(){document.querySelector("#scrollbar").parentNode.addEventListener("scroll",e=>{let t=e.target.scrollLeft,o=document.querySelector("#table");o&&(o.scrollLeft=t)})}runOnScroll(){}}